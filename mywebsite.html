<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Northwoods Playschool ‚Äì Weather Stream</title>
<meta name="description" content="Northwoods Playschool ‚Äì Weather intensity & YouTube live chance." />

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

<style>
:root {
  --primary: #0d1117;       /* dark background */
  --secondary: #161b22;     /* card background */
  --accent: #f5c542;        /* highlight / buttons */
  --green: #1f4d2b;
  --danger: #ff4c4c;
  --brown: #7c2d12;
  --light: #c9d1d9;
}

* { box-sizing:border-box; margin:0; padding:0; font-family: 'Inter', sans-serif; }
body { background: var(--primary); color: var(--light); line-height:1.6; }

header {
  text-align:center;
  padding:3rem 1rem 2rem;
}
header img { max-width:250px; width:100%; }

nav {
  display:flex;
  justify-content:center;
  gap:2rem;
  margin-bottom:2rem;
}
nav a {
  color: var(--light);
  text-decoration:none;
  font-weight:600;
  transition: 0.3s;
}
nav a:hover { color: var(--accent); }

section { max-width:900px; margin:auto; padding:2rem 1rem; }

h1, h2, h3 {
  font-weight:800;
  margin-bottom:1rem;
}
h2 { color: var(--accent); }

.card {
  background: var(--secondary);
  padding:1.5rem;
  border-radius:12px;
  margin-bottom:1.5rem;
  box-shadow: 0 10px 30px rgba(0,0,0,0.4);
  transition: transform 0.3s;
}
.card:hover { transform: translateY(-5px); }

.intensity {
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:1rem;
}
.score {
  font-size:3rem;
  font-weight:900;
  color: var(--accent);
}
.level {
  font-weight:700;
  padding:0.4rem 0.75rem;
  border-radius:999px;
  background: var(--green);
  color: #fff;
}

#advisory {
  display:none;
  padding:1rem;
  margin-bottom:1rem;
  border-radius:12px;
  background: var(--danger);
  text-align:center;
  font-weight:700;
}

#activeLocation {
  display:none;
  padding:0.75rem 1rem;
  margin-bottom:1rem;
  border-radius:12px;
  background:#ffc9c9;
  color:#7c0000;
  text-align:center;
  font-weight:700;
}

.funLabel { 
  text-align:center; 
  font-weight:800; 
  font-size:1.1rem; 
  margin-bottom:0.5rem; 
  color: var(--brown);
}
.funCard {
  text-align:center;
}
.funScore {
  font-size:2rem;
  font-weight:900;
  color: var(--brown);
}

#alerts, #youtubeChance {
  margin-top:1rem;
  padding:1rem;
  border-radius:12px;
  background: var(--secondary);
}

footer {
  text-align:center;
  padding:2rem 1rem;
  font-size:0.9rem;
  color: var(--light);
  margin-top:3rem;
}
</style>
</head>

<body>

<header>
  <img src="https://jace200677.github.io/cdnstatic.playweather/northwoods.png" alt="Northwoods Playschool Logo" />
</header>

<nav>
  <a href="#about">About</a>
  <a href="#weather">Weather</a>
  <a href="#contact">Contact</a>
</nav>

<section id="about">
  <h2>About Northwoods Playschool</h2>
  <p>Northwoods Playschool is a warm, nature-inspired learning environment where children grow through exploration, creativity, and play.</p>
</section>

<section id="weather">
  <h2>Weather Safety & Intensity</h2>

  <div id="advisory">‚ö†Ô∏è Severe Weather Active in the United States</div>
  <div id="activeLocation"></div>

  <div class="card intensity">
    <div>
      <div class="score" id="score">--</div>
      <div class="level" id="level">Loading‚Ä¶</div>
      <small>Weather Intensity Score (0‚Äì500)</small>
    </div>
    <div>
      <p id="details" style="opacity:0.75;"></p>
    </div>
  </div>

  <div id="youtubeChance" class="card">Calculating video/live stream chance‚Ä¶</div>

  <div class="funLabel">üí© Poop / Fart Intensity Meter</div>
  <div class="card funCard">
    <div class="funScore" id="poopScore">--</div>
    <strong id="poopLevel">Loading‚Ä¶</strong>
    <p style="opacity:0.7;">Poop / Fart Intensity Index (0‚Äì2026) ¬∑ Includes current Weather Score üòÑ</p>
  </div>

  <div id="alerts" class="card">
    <h3>National Weather Service Alerts (USA)</h3>
    <ul id="alertsList" style="padding-left:1.2rem;"></ul>
  </div>
</section>

<section id="contact">
  <h2>Contact Us</h2>
  <p>Email: <strong>jacefink17@outlook.com</strong></p>
</section>

<footer>
  <small>¬© 2026 Northwoods Playschool ¬∑ Learning through nature üå≤</small>
</footer>

<script>
// ---------------- CONFIG ----------------
const LAT = 44.9778;
const LON = -93.2650;
const NWS_POINTS = `https://api.weather.gov/points/${LAT},${LON}`;
const NWS_ALERTS = "https://api.weather.gov/alerts/active?status=actual";
window.NATIONAL_ALERT_SCORE = 0;

// ---------------- SCORING ----------------
function calculateLocalIntensity(temp, wind, humidity, precip){
  let score = 0;
  if(temp >= 90 || temp <= 32) score += 150;
  else if(temp >= 80 || temp <= 40) score += 75;
  if(wind >= 25) score += 125;
  else if(wind >= 15) score += 75;
  if(precip > 0) score += 100;
  if(humidity >= 90 || humidity <= 20) score += 50;
  return Math.min(score, 500);
}

function calculatePoopIntensity(temp, wind, weatherScore){
  let base = weatherScore * 3;
  base += temp > 85 ? 300 : 0;
  base += wind > 15 ? 200 : 0;
  base += Math.random() * 400;
  return Math.min(Math.round(base), 2026);
}

function poopLevel(score){
  if(score > 1600) return "üö® DEFCON GAS";
  if(score > 1200) return "üí® Severe Fart Risk";
  if(score > 700) return "üò¨ Noticeable";
  if(score > 300) return "üôÇ Mild";
  return "üòå All Clear";
}

function getLevel(score){
  if(score >= 350) return "High";
  if(score >= 200) return "Moderate";
  return "Low";
}

function getYouTubeChance(score){
  if(score >= 400) return "Yes ‚Äì Perfect for streaming!";
  if(score >= 300) return "Probably ‚Äì Good for content.";
  if(score >= 150) return "Maybe ‚Äì Moderate conditions.";
  return "No / Unlikely ‚Äì Avoid outdoor content.";
}

// ---------------- WEATHER ----------------
async function fetchLocalWeather(){
  try{
    const p = await fetch(NWS_POINTS).then(r=>r.json());
    const stations = await fetch(p.properties.observationStations).then(r=>r.json());
    const id = stations.features[0].properties.stationIdentifier;
    const obs = await fetch(`https://api.weather.gov/stations/${id}/observations/latest`).then(r=>r.json());
    const d = obs.properties;
    return {
      temp: d.temperature.value * 9/5 + 32,
      wind: d.windSpeed.value * 2.23694,
      humidity: d.relativeHumidity.value,
      precip: (d.precipitationLastHour.value || 0) * 0.03937
    };
  } catch { return {temp:70, wind:0, humidity:50, precip:0}; }
}

// ---------------- ALERTS ----------------
function getAlertSeverityScore(alert){
  const e = alert.properties.event.toLowerCase();
  if(e.includes("tornado") || e.includes("hurricane")) return 500;
  if(e.includes("blizzard") || e.includes("ice storm")) return 400;
  if(e.includes("severe thunderstorm")) return 300;
  if(e.includes("flood") || e.includes("high wind")) return 200;
  if(e.includes("advisory")) return 100;
  return 0;
}

async function updateNWSAlerts(){
  try{
    const data = await fetch(NWS_ALERTS).then(r=>r.json());
    const list = document.getElementById("alertsList");
    const locationBox = document.getElementById("activeLocation");

    list.innerHTML = "";
    locationBox.style.display = "none";

    let maxScore = 0;
    let focusAlert = null;

    if(data.features.length){
      data.features.forEach(a=>{
        const score = getAlertSeverityScore(a);
        if(score > maxScore){ maxScore = score; focusAlert = a; }
        const li = document.createElement("li");
        li.textContent = `${a.properties.event}: ${a.properties.areaDesc}`;
        list.appendChild(li);
      });
    } else list.innerHTML = "<li>No active alerts in the USA.</li>";

    window.NATIONAL_ALERT_SCORE = maxScore;

    if(focusAlert && maxScore >= 200){
      locationBox.style.display = "block";
      locationBox.textContent =
        `Severe Weather Focus: ${focusAlert.properties.event} ‚Äî ${focusAlert.properties.areaDesc}`;
    }
  } catch { window.NATIONAL_ALERT_SCORE = 0; }
}

// ---------------- UPDATE UI ----------------
async function updateWeather(){
  const obs = await fetchLocalWeather();
  const local = calculateLocalIntensity(obs.temp, obs.wind, obs.humidity, obs.precip);
  const score = Math.max(local, window.NATIONAL_ALERT_SCORE);

  document.getElementById("score").textContent = score;
  document.getElementById("level").textContent = getLevel(score);
  document.getElementById("details").textContent =
    `Local: ${obs.temp.toFixed(1)}¬∞F ¬∑ Wind ${obs.wind.toFixed(1)} mph ¬∑ Humidity ${obs.humidity}%`;
  document.getElementById("youtubeChance").textContent =
    "Video / Live Stream Chance: " + getYouTubeChance(score);

  const poop = calculatePoopIntensity(obs.temp, obs.wind, score);
  document.getElementById("poopScore").textContent = poop;
  document.getElementById("poopLevel").textContent = poopLevel(poop);
}

// ---------------- INIT ----------------
updateNWSAlerts();
updateWeather();
setInterval(()=>{ updateNWSAlerts(); updateWeather(); }, 300000);
setTimeout(() => location.reload(), 120000);
</script>

</body>
</html>

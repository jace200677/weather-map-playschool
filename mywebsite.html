<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Northwoods Playschool ‚Äì Live Weather Stream</title>
<meta name="description" content="Weather intensity & YouTube live/video chance based on NWS data anywhere in the USA." />

<style>
:root {
  --green:#1f4d2b;
  --light:#f6f1e6;
  --accent:#f5c542;
  --orange:#f59e0b;
  --danger:#b91c1c;
}
*{box-sizing:border-box;}
body{margin:0;font-family:system-ui,-apple-system,BlinkMacSystemFont,sans-serif;background:var(--light);color:#2a2a2a;line-height:1.6;}
header{text-align:center;padding:3rem 1rem 2rem;}
header img{max-width:360px;width:100%;}
nav{background:var(--green);padding:0.75rem;text-align:center;}
nav a{color:#fff;text-decoration:none;margin:0 1rem;font-weight:600;}
section{max-width:900px;margin:auto;padding:3rem 1.25rem;}
h2{color:var(--green);margin-top:0;}
.cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:1.5rem;}
.card{background:#fff;padding:1.5rem;border-radius:16px;box-shadow:0 10px 25px rgba(0,0,0,0.08);}
.intensity{display:flex;align-items:center;justify-content:space-between;gap:1rem;background:#fff;padding:1.5rem;border-radius:16px;box-shadow:0 10px 25px rgba(0,0,0,0.15);margin-bottom:1.5rem;}
.score{font-size:2.5rem;font-weight:800;color:var(--green);}
.level{font-weight:700;padding:0.4rem 0.75rem;border-radius:999px;background:var(--accent);}
#advisory{display:none;padding:1rem;margin-bottom:1.5rem;border-radius:16px;background:var(--danger);color:#fff;font-weight:700;text-align:center;}
#alerts{margin-top:1rem;background:#fff;padding:1rem;border-radius:16px;box-shadow:0 5px 15px rgba(0,0,0,0.1);}
#youtubeChance{margin-top:1rem;background:#fff;padding:1rem;border-radius:16px;box-shadow:0 5px 15px rgba(0,0,0,0.1);font-weight:700;font-size:1.1rem;text-align:center;}
footer{background:var(--green);color:#fff;text-align:center;padding:2rem 1rem;}
</style>
</head>
<body>

<header>
  <img src="https://jace200677.github.io/cdnstatic.playweather/northwoods.png" alt="Northwoods Playschool Logo" />
</header>

<nav>
  <a href="#about">About</a>
  <a href="#programs">Programs</a>
  <a href="#weather">Weather</a>
  <a href="#contact">Contact</a>
</nav>

<section id="about">
<h2>About Northwoods Playschool</h2>
<p>Nature-inspired learning where children grow through exploration, creativity, and play.</p>
</section>

<section id="programs">
<h2>Our Programs</h2>
<div class="cards">
<div class="card"><h3>Early Explorers</h3><p>Ages 3‚Äì4.</p></div>
<div class="card"><h3>Forest Friends</h3><p>Ages 4‚Äì5.</p></div>
<div class="card"><h3>Kindergarten Prep</h3><p>Confidence and routines.</p></div>
</div>
</section>

<section id="weather">
<h2>Weather Safety & Intensity</h2>
<div id="advisory">‚ö†Ô∏è High Weather Intensity ‚Äì Outdoor activities may be unsafe</div>

<div class="intensity">
  <div>
    <div class="score" id="score">--</div>
    <div class="level" id="level">Loading‚Ä¶</div>
    <small>Weather Intensity Score (0‚Äì500)</small>
  </div>
  <div>
    <p id="details" style="margin:0;font-size:0.95rem;opacity:0.85;"></p>
  </div>
</div>

<div id="youtubeChance">Calculating video/live stream chance‚Ä¶</div>

<div style="position:relative;width:100%;padding-bottom:62.5%;border-radius:16px;overflow:hidden;box-shadow:0 10px 25px rgba(0,0,0,0.15); margin-top:1rem;">
  <iframe src="https://www.ventusky.com/?p=47.7;-91.9;7&l=temperature"
      style="position:absolute;top:0;left:0;width:100%;height:100%;border:0;" loading="lazy"></iframe>
</div>

<div id="alerts">
<h3>National Weather Service Alerts</h3>
<ul id="alertsList" style="margin:0;padding-left:1.2rem;"></ul>
</div>
</section>

<section id="contact">
<h2>Contact Us</h2>
<p>Email: <strong>jacefink17@outlook.com</strong></p>
</section>

<footer>
<small>¬© 2026 Northwoods Playschool ¬∑ Learning through nature üå≤</small>
</footer>

<script>
// --- Helpers ---
function calculateIntensity(temp, wind, humidity, precip){
  let score=0;
  if(temp>=90||temp<=32) score+=150;
  else if(temp>=80||temp<=40) score+=75;
  if(wind>=25) score+=125;
  else if(wind>=15) score+=75;
  if(precip>0) score+=100;
  if(humidity>=90||humidity<=20) score+=50;
  return Math.min(score,500);
}
function getLevel(score){if(score>=350) return "High"; if(score>=200) return "Moderate"; return "Low";}
function getYouTubeChance(score){
  if(score>=400) return "Yes ‚Äì Perfect for streaming or posting!";
  if(score>=300) return "Probably ‚Äì Good weather for content.";
  if(score>=150) return "Maybe ‚Äì Moderate conditions.";
  return "No / Unlikely ‚Äì Avoid outdoor content.";
}

// --- Fetch NWS Observation anywhere in USA ---
async function fetchWeather(lat, lon){
  try{
    const stationsResp = await fetch(`https://api.weather.gov/points/${lat},${lon}/stations`);
    const stationsData = await stationsResp.json();
    const stationId = stationsData.features[0].properties.stationIdentifier;
    const obsResp = await fetch(`https://api.weather.gov/stations/${stationId}/observations/latest`);
    const obsData = await obsResp.json();
    const props = obsData.properties;
    const temp = props.temperature?.value!=null ? props.temperature.value*9/5+32 : 70;
    const wind = props.windSpeed?.value!=null ? props.windSpeed.value*2.23694 : 0;
    const humidity = props.relativeHumidity?.value!=null ? props.relativeHumidity.value : 50;
    const precip = props.precipitationLastHour?.value!=null ? props.precipitationLastHour.value*0.03937 : 0;
    return {temp, wind, humidity, precip};
  } catch(e){
    console.log("Error fetching weather", e);
    return {temp:70, wind:0, humidity:50, precip:0};
  }
}

// --- Update Weather ---
async function updateWeather(lat=44.9778, lon=-93.2650){ // default Minneapolis
  const obs = await fetchWeather(lat, lon);
  const score = calculateIntensity(obs.temp, obs.wind, obs.humidity, obs.precip);
  const level = getLevel(score);

  document.getElementById("score").textContent = score;
  document.getElementById("level").textContent = level;
  document.getElementById("details").textContent = `Temp: ${obs.temp.toFixed(1)}¬∞F, Wind: ${obs.wind.toFixed(1)} mph, Humidity: ${obs.humidity}%, Precip: ${obs.precip.toFixed(2)} in/hr`;
  document.getElementById("youtubeChance").textContent = "Video / Live Stream Chance: "+getYouTubeChance(score);

  const levelEl = document.getElementById("level");
  const scoreEl = document.getElementById("score");
  const advisoryEl = document.getElementById("advisory");

  if(score>=350){levelEl.style.background="#ef4444"; scoreEl.style.color="#b91c1c"; advisoryEl.style.display="block";}
  else if(score>=200){levelEl.style.background="#f59e0b"; scoreEl.style.color="#b9730f"; advisoryEl.style.display="none";}
  else{levelEl.style.background="#f5c542"; scoreEl.style.color="#1f4d2b"; advisoryEl.style.display="none";}
}

// --- Fetch NWS Alerts anywhere in USA ---
async function updateNWSAlerts(){
  try{
    const resp = await fetch("https://api.weather.gov/alerts/active?status=actual");
    const data = await resp.json();
    const list = document.getElementById("alertsList");
    list.innerHTML="";
    if(data.features && data.features.length>0){
      data.features.forEach(alert=>{
        const li = document.createElement("li");
        li.textContent = `${alert.properties.areaDesc}: ${alert.properties.headline}`;
        list.appendChild(li);
      });
    } else{
      const li = document.createElement("li");
      li.textContent = "No active alerts in the USA.";
      list.appendChild(li);
    }
  } catch(e){document.getElementById("alertsList").innerHTML="<li>Unable to fetch alerts.</li>";}
}

// --- INITIAL LOAD ---
updateWeather(); 
updateNWSAlerts(); 
setInterval(()=>{updateWeather(); updateNWSAlerts();},300000); // every 5 min
</script>

</body>
</html>
